name: "~Sandbox"

on:
  push:

jobs:
  set-json:
    runs-on: ubuntu-22.04
    outputs:
      ALL_TAGS: ${{ steps.setjson.outputs.ALL_TAGS }}
    steps:
      - name: Set JSON object
        id: setjson
        shell: bash -x -e {0}
        run: |   

          ALL_TAGS=$(cat << EOF
          { 
            "TAG_JAX_MEALKIT": "TAG_JAX_MEALKIT_VALUE",
            "TAG_PAX_FINAL": "TAG_PAX_FINAL_VALUE",
          }
          EOF
          )
          echo $ALL_TAGS
          echo "ALL_TAGS=${ALL_TAGS}" >> $GITHUB_OUTPUT
          cat $GITHUB_OUTPUT
  
  get-json:
    runs-on: ubuntu-22.04
    needs: set-json
    strategy:
      matrix:
        include:
          - TAG: JAX
            CONTAINER_IMAGE: MEALKIT
          - TAG: PAX
            CONTAINER_IMAGE: FINAL
    steps:
      - name: echo values
        run: |
          echo ALL_TAGS=${{ fromJson(needs.set-json.outputs.ALL_TAGS) }}
          TAG_A=${{ fromJson(needs.set-json.outputs.ALL_TAGS).TAG_[format('{0}_MEALKIT', matrix.TAG)] }}
          echo $TAG_A
          




