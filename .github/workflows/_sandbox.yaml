name: "~Sandbox"

on:
  workflow_dispatch:

jobs:
  set-json:
    runs-on: ubuntu-22.04
    outputs:
      ALL_TAGS: ${{ steps.setjson.ALL_TAGS }}
    steps:
      - name: Set JSON object
        id: setjson
        run: |         
          ALL_TAGS_JSON=$(cat << EOF 
          ALL_TAGS={
          \"TAG_JAX_MEALKIT\": \"TAG_JAX_MEALKIT_VALUE\","
          \"TAG_JAX_FINAL\": \"TAG_JAX_FINAL_VALUE\","
          }
          EOF
          )
          echo $ALL_TAGS_JSON
          echo $ALL_TAGS_JSON >> $GITHUB_OUTPUT
  
  get-json:
    runs-on: ubuntu-22.04
    needs: set-json
    strategy:
      matrix:
        include:
          - TAG: JAX
            VALUE: MEALKIT
          - TAG: JAX
            VALUE: FINAL
    steps:
      - name: echo values
        run: |
          echo TAG=${{ matrix.TAG }}
          echo VALUE=${{ matrix.VALUE }}
          VAL=${{ fromJson(needs.set-json.outputs.ALL_TAGS).TAG_JAX_MEALKIT }}
          echo VAL=${VAL}



